<div class="page-header">
    <h2>Issue page</h2>
</div>
<div class="jumbotron container">
    <div id="issue-info">
        <div class="col-md-7">
            <span class="key"><strong>{{currentIssue.IssueKey}}</strong></span>
            <a href="#issues/edit/{{currentIssue.Id}}" class="btn btn-success" ng-if="isAdmin() || isLeadOfProject" role="button">Edit</a>
            <p><strong>Title: </strong>{{currentIssue.Title}}</p>
            <p><strong>Description: </strong>{{currentIssue.Description}}</p>
            <p><strong>AssigneeId </strong>(current Id {{currentIssue.Assignee.Id}}) {{currentIssue.Assignee.Username}}</p>
            <p><strong>PriorityId </strong>(current Id {{currentIssue.Priority.Id}}) {{currentIssue.Priority.Name}}</p>
            <p><strong>DueDate: </strong>{{currentIssue.DueDate}}</p>
            <p>Author: {{currentIssue.Author.Username}}</p>
            <p>Project: {{currentIssue.Project.Name}}</p>
            <p>Status: {{currentIssue.Status.Name}}</p>
            <p>Labels: {{currentIssueLabels.join(', ')}}</p>
        </div>
        <div class="col-md-5">
            <ul class="status"  ng-if="currentIssue.AvailableStatuses.length !== 0">
                Available statuses:
                <li ng-repeat="status in currentIssue.AvailableStatuses">-----{{status.Name}}
                    <button ng-click="changeStatus(status.Id)"
                            ng-if="isAdmin() || isAssignee || isLeadOfProject"
                            class="btn btn-success"
                            role="button">
                        Change
                    </button>
                </li>
            </ul>
            <div ng-if="issueComments.length !== 0">
                <h4>Comments</h4>
                <ul class="list-group comments">
                    <li class="list-group-item" ng-repeat="comment in issueComments">
                        <h4 class="list-group-item-heading list-group-item-info">{{comment.Author.Username}} - {{comment.CreatedOn}}</h4>
                        <p class="list-group-item-text">{{comment.Text}}</p>
                    </li>
                </ul>
            </div>
            <div class="form-group" ng-if="isAdmin() || isLeadOfProject || isAssignee">
                <label for="addComment">Add comment</label>
                <textarea class="form-control" id="addComment" ng-model="issueComment.Text" required></textarea>
                <div class="text-right">
                    <button class="btn btn-primary btn-sm" ng-click="addComment(issueComment)">Add</button>
                </div>
            </div>
        </div>
    </div>
</div>